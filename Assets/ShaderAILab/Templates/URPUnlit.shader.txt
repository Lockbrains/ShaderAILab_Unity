Shader "AILab/Template" {
    Properties {
        // [AILab_Property: name="_BaseColor" display="Base Color" type="Color" default="(1,1,1,1)"]
        _BaseColor("Base Color", Color) = (1,1,1,1)
        // [AILab_Property: name="_Brightness" display="Brightness" type="Range" min="0" max="2" default="1"]
        _Brightness("Brightness", Range(0,2)) = 1
    }
    SubShader {
        // [AILab_Global: cull="Back" blend="Off" zwrite="On"]
        Tags { "RenderType"="Opaque" "Queue"="Geometry" "RenderPipeline"="UniversalPipeline" }
        Cull Back
        ZWrite On

        // [AILab_Pass: name="ForwardUnlit" lightmode="UniversalForward"]
        Pass {
            Name "ForwardUnlit"
            Tags { "LightMode"="UniversalForward" }

            HLSLPROGRAM
            #pragma vertex vert
            #pragma fragment frag
            #pragma multi_compile_fog

            #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"

            CBUFFER_START(UnityPerMaterial)
                float4 _BaseColor;
                float _Brightness;
            CBUFFER_END

            struct Attributes {
                float4 positionOS : POSITION;
                float3 normalOS   : NORMAL;
                float2 uv         : TEXCOORD0;
            };

            struct Varyings {
                float4 positionCS : SV_POSITION;
                float3 normalWS   : TEXCOORD0;
                float2 uv         : TEXCOORD1;
                float  fogFactor  : TEXCOORD2;
            };

            // [AILab_Section: "Helper Functions"]

            // [AILab_Section: "Vertex"]
            // [AILab_Block_Start: "Basic Vertex Transform"]
            // [AILab_Intent: "Standard object-to-clip-space vertex transformation"]
            // No custom vertex manipulation in this template.
            // [AILab_Block_End]

            Varyings vert(Attributes input) {
                Varyings output = (Varyings)0;
                VertexPositionInputs vpi = GetVertexPositionInputs(input.positionOS.xyz);
                output.positionCS = vpi.positionCS;
                output.normalWS   = TransformObjectToWorldNormal(input.normalOS);
                output.uv         = input.uv;
                output.fogFactor  = ComputeFogFactor(vpi.positionCS.z);
                return output;
            }

            // [AILab_Section: "Fragment"]
            // [AILab_Block_Start: "Unlit Color Output"]
            // [AILab_Intent: "Output base color multiplied by brightness"]
            // [AILab_Param: "_BaseColor" role="base_color"]
            // [AILab_Param: "_Brightness" role="intensity_multiplier"]
            half4 ComputeColor(float3 normalWS) {
                return _BaseColor * _Brightness;
            }
            // [AILab_Block_End]

            half4 frag(Varyings input) : SV_Target {
                half4 color = ComputeColor(input.normalWS);
                color.rgb = MixFog(color.rgb, input.fogFactor);
                return color;
            }

            ENDHLSL
        }
    }
    FallBack "Hidden/Universal Render Pipeline/FallbackError"
}
